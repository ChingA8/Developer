jQuery(document).ready(function(o){function e(o,e,t){var n=new google.maps.LatLng(o,e),a=new google.maps.Geocoder;a.geocode({latLng:n},function(o,e){e!==google.maps.GeocoderStatus.OK&&alert(e),e==google.maps.GeocoderStatus.OK&&(console.log(o),t(o[0].formatted_address,o[0]))})}if("undefined"!=typeof check){jQuery("#"+AutoCompOptions.input_field).on("input",function(){o("#gjm_lat").val(""),o("#gjm_lng").val("")});var t={center:new google.maps.LatLng(3.139003,101.68685499999992),zoom:13};o("<div id='map-canvas' style='height:400px;'></div>").insertBefore(".fieldset-job_location .field");var n=new google.maps.Map(document.getElementById("map-canvas"),t),a=document.getElementById(AutoCompOptions.input_field);if(""==AutoCompOptions.options.country)var l={};else var l={componentRestrictions:{country:AutoCompOptions.options.country}};var s=new google.maps.places.Autocomplete(a,l);s.bindTo("bounds",n);var g=new google.maps.Marker({map:n,draggable:!0});g.setVisible(!1),google.maps.event.addListener(g,"dragend",function(t){e(t.latLng.lat().toFixed(3),t.latLng.lng().toFixed(3),function(e,t){o("#job_location").val(e);for(var n=0;n<t.address_components.length;n++)for(var a=0;a<t.address_components[n].types.length;a++)if("locality"==t.address_components[n].types[a]){t.address_components[n].long_name}})}),google.maps.event.addListener(g,"dragstart",function(){o("#job_location").val("Currently dragging marker...")}),google.maps.event.addListener(s,"place_changed",function(){var e=s.getPlace();if(e.geometry){o("#gjm_lat").val(e.geometry.location.lat()),o("#gjm_lng").val(e.geometry.location.lng());var t=o("#"+AutoCompOptions.org_field).closest("div."+AutoCompOptions.target);t.trigger("update_results",[1,!1]),e.geometry.viewport?n.fitBounds(e.geometry.viewport):(n.setCenter(e.geometry.location),n.setZoom(17)),g.setPosition(e.geometry.location),g.setVisible(!0)}})}else{jQuery("#search_location").on("input",function(){o("#gjm_lat").val(""),o("#gjm_lng").val("")});var a=document.getElementById("search_location");if(""==AutoCompOptions.options.country)var l={};else var l={componentRestrictions:{country:AutoCompOptions.options.country}};var s=new google.maps.places.Autocomplete(a,l);google.maps.event.addListener(s,"place_changed",function(){var e=s.getPlace();if(e.geometry){o("#gjm_lat").val(e.geometry.location.lat()),o("#gjm_lng").val(e.geometry.location.lng());var t=o("#"+AutoCompOptions.org_field).closest("div."+AutoCompOptions.target);t.trigger("update_results",[1,!1])}})}});